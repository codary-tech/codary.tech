---
import AppFilters from "@/components/apps/AppFilters.astro";
import AppGrid from "@/components/apps/AppGrid.astro";
import { type Lang, useTranslations } from "@/i18n";
import Layout from "@/layouts/General.astro";
import { getApps } from "@/models/apps/app.service";

// Get locale from params
const { lang } = Astro.params;
const currentLocale = lang as Lang;
const t = useTranslations(currentLocale);

// Get all apps for the current language
const apps = await getApps({ lang: currentLocale });
---

<Layout title={t("apps.title")} description={t("apps.description")}>
  <div class="container mx-auto px-4 pb-8 pt-24">
    <h1 class="text-4xl font-bold text-center mb-4 text-main-light dark:text-main-dark">
      {t("apps.title")}
    </h1>

    <p class="text-center text-lg mb-8 max-w-2xl mx-auto text-main-light dark:text-main-dark">
      {t("apps.description")}
    </p>

    <AppFilters currentLocale={currentLocale} />

    <AppGrid apps={apps} />
  </div>
</Layout>
